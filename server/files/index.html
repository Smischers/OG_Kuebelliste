<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kübelliste!</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="index.css" />
  <link rel="icon" type="image/x-icon" href="../resources/Kübelliste_Icon.png">
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
</head>

<body>
  <div id="app">
    <header>
      <navbar></navbar>
    </header>

    <main>
      <!-- here comes data -->
      <ul>
        <div class="row center">

          <li>
            <div class="center" v-for="item in rowChunks" :key="index">
              <div v-for="card in item" :key="index" class="col s2.5">

                <a :href="`listview.html?listName=${ card.name}`">
                  <div class="card hoverable" style="width: 170px; height: 220px;">
                    <div class="card-image">
                      <img :src=card.picture style="width:170px; height:150px;">
                    </div>
                    <div class="card-content">
                      <span class="card-title center"
                        style="font-size: 18.5px !important; color: black !important;"><b>{{ card.name }}</b></span>
                    </div>
                  </div>
                </a>

              </div>
            </div>
          </li>

        </div>
      </ul>
    </main>

    <!-- OUR FOOTER-->
    <kuebelfooter></kuebelfooter>

  </div>


  <script src="components.js"></script>
  <script>
    new Vue({
      el: '#app',
      data: {
        resizeEvent: 0,
        items: []
      },
      computed: {
        rowChunks() {
          this.resizeEvent;
          const chunkSize = Math.floor(window.innerWidth / 225);
          const result = [];
          console.log(chunkSize)
          for (let i = 0; i < this.items.length; i += chunkSize) {
            result.push(this.items.slice(i, i + chunkSize));
          }

          return result;
        },
      },
      methods: {
        fetchItems() {
          // Simulate an API call
          const fetchedItems = [
            {
              name: "ESO Dungeons", picture: "https://assetsio.gnwcdn.com/elder-scrolls-online-logo.jpg?width=1200&height=1200&fit=crop&quality=100&format=png&enable=upscale&auto=webp",
            },
            {
              name: "AnimeList", picture: "https://image.spreadshirtmedia.net/image-server/v1/mp/products/T1459A839PA4459PT28D187144250W10000H4186/views/1,width=800,height=800,appearanceId=839,backgroundColor=F2F2F2/anime-logo-sticker.jpg",
            },
            {
              name: "Restaurants", picture: "https://www.restaurant-lamer.de/wp-content/uploads/2022/06/lamer_aquarium.jpg",
            },
            {
              name: "ESO Dungeons", picture: "https://assetsio.gnwcdn.com/elder-scrolls-online-logo.jpg?width=1200&height=1200&fit=crop&quality=100&format=png&enable=upscale&auto=webp",
            },
            {
              name: "AnimeList", picture: "https://image.spreadshirtmedia.net/image-server/v1/mp/products/T1459A839PA4459PT28D187144250W10000H4186/views/1,width=800,height=800,appearanceId=839,backgroundColor=F2F2F2/anime-logo-sticker.jpg",
            },
            {
              name: "Restaurants", picture: "https://www.restaurant-lamer.de/wp-content/uploads/2022/06/lamer_aquarium.jpg",
            },
            {
              name: "ESO Dungeons", picture: "https://assetsio.gnwcdn.com/elder-scrolls-online-logo.jpg?width=1200&height=1200&fit=crop&quality=100&format=png&enable=upscale&auto=webp",
            },
            {
              name: "AnimeList", picture: "https://image.spreadshirtmedia.net/image-server/v1/mp/products/T1459A839PA4459PT28D187144250W10000H4186/views/1,width=800,height=800,appearanceId=839,backgroundColor=F2F2F2/anime-logo-sticker.jpg",
            },
            {
              name: "Restaurants", picture: "https://www.restaurant-lamer.de/wp-content/uploads/2022/06/lamer_aquarium.jpg",
            }
          ];
          fetchedItems.push({
            id: fetchedItems.length + 1, name: "New List", picture: "../resources/Plus_symbol.png",
          })

          this.items = fetchedItems
        },
        handleResize() {
          this.resizeEvent++;
        },
      },
      mounted() {
        this.fetchItems();
        window.addEventListener('resize', this.handleResize);
      }
    });

  </script>
</body>

</html>